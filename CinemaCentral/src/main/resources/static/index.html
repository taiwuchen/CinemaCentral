<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>CinemaCentral</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <link rel="stylesheet" href="styles.css">
  <link rel="icon" href="iconblack.ico" type="image/x-icon">

  <style>
    footer {
      background-color: #000;
      color: rgb(239, 239, 239);
      text-align: center;
      padding: 10px;
      bottom: 0;
      width: 100%;
    }

    .movies-container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Existing styles */
    /* ... */
  </style>
</head>

<body>
  <main class="-grey ">
    <!-- Navbar (Sits on top) -->
    <div class="-top -bar -dark-grey ">
      <a href="./index.html" class="-bar-item -button">
        <img src="Logowhtblcknbg.png" height="50">
      </a>
      <div class="-right -hide-small">
        <a href="./movies.html" class="-bar-item -button" style="font-size: 20;">Movies</a>
        <a href="./seats.html" class="-bar-item -button">Locations</a>
        <a href="./contact.html" class="-bar-item -button">Customer Support</a>
      </div>
    </div>
    <!-- Start Content -->

    <div class="-display-center -container -text-white " style="padding-top: 80px;font-size:50px;">Welcome!</div>
    <div class="-display-leftmiddle -container -text-white" style="font-size:30px;">Here are the movies on this week:</div>

    <div class="movies-container" id="movies-container">
      <!-- Movies will be dynamically loaded here -->
    </div>

    <footer>
      &#174; 2024 CinemaCentral. All rights reserved.
    </footer>
    <!-- End Content -->
  </main>

  <script>
    // Fetch movies from the backend and display them
    fetch('/api/movies')
      .then(response => response.json())
      .then(movies => {
        const moviesContainer = document.getElementById('movies-container');
        const rows = [];
        for (let i = 0; i < movies.length; i += 3) {
          const rowMovies = movies.slice(i, i + 3);
          const rowHtml = `
          <div class="row">
            ${rowMovies.map(movie => `
              <div class="column">
                <div class="polaroid">
                  <img src="${movie.imageUrl}" alt="${movie.title}" style="width:100%">
                  <div class="container">
                    <p class="-text-white">${movie.title}</p>
                    <a id="jump2" class=" -btn -amber -text-deep-orange" href="./seats.html?movieId=${movie.id}">Watch</a>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
          `;
          rows.push(rowHtml);
        }
        moviesContainer.innerHTML = rows.join('');
      })
      .catch(err => console.error("Failed to load movies:", err));
  </script>
</body>

</html>
